<!doctype html><html lang=zh-cn><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><meta charset=utf-8><meta name=generator content="Hugo 0.78.2"><meta name=theme-color content="#fff"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><title>Hadoop Hbase HAé«˜å¯ç”¨é›†ç¾¤æ­å»º | æ…¢æ…¢æ‚ </title><link rel=stylesheet href=/css/meme.min.css><script src=/js/meme.min.js></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&family=Cinzel+Decorative:wght@700&display=swap" media=print onload="this.media='all'"><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&family=Cinzel+Decorative:wght@700&display=swap"></noscript><meta name=author content="eden"><meta name=description content="åŸºç¡€ç¯å¢ƒå‡†å¤‡ æ ¹æ®å‰é¢[hadoopé›†ç¾¤æ­å»º](https://mydiscat.cnâ€¦â€¦"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=mask-icon href=/icons/safari-pinned-tab.svg color=#2a6df4><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="æ…¢æ…¢æ‚ "><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=mobile-web-app-capable content="yes"><meta name=application-name content="æ…¢æ…¢æ‚ "><meta name=msapplication-starturl content="../../"><meta name=msapplication-TileColor content="#fff"><meta name=msapplication-TileImage content="../../icons/mstile-150x150.png"><link rel=manifest href=/manifest.json><link rel=canonical href=https://example.com/tech/hadoop-hbase-ha-distributed-cluster-construction/><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2018-11-01T08:00:00+08:00","dateModified":"2020-11-27T17:21:09+08:00","url":"https://example.com/tech/hadoop-hbase-ha-distributed-cluster-construction/","headline":"Hadoop Hbase HAé«˜å¯ç”¨é›†ç¾¤æ­å»º","description":"åŸºç¡€ç¯å¢ƒå‡†å¤‡ æ ¹æ®å‰é¢[hadoopé›†ç¾¤æ­å»º](https://mydiscat.cnâ€¦â€¦","inLanguage":"zh-CN","articleSection":"tech","wordCount":4477,"image":["https://upload-images.jianshu.io/upload_images/6273500-862219dd55729e0b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240","https://upload-images.jianshu.io/upload_images/6273500-fb526b6ff7c7bb7b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"],"author":{"@type":"Person","description":"å› æ— æ‰€ä½ï¼Œè€Œç”Ÿå…¶å¿ƒ","email":"distant_cat@126.com","image":"https://example.com/icons/apple-touch-icon.png","url":"https://io-oi.me/","name":"eden"},"license":"åœ¨ä¿ç•™æœ¬æ–‡ä½œè€…åŠæœ¬æ–‡é“¾æ¥çš„å‰æä¸‹ï¼Œéå•†ä¸šç”¨é€”éšæ„è½¬è½½åˆ†äº«ã€‚","publisher":{"@type":"Organization","name":"æ…¢æ…¢æ‚ ","logo":{"@type":"ImageObject","url":"https://example.com/icons/apple-touch-icon.png"},"url":"https://example.com/"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://example.com/"}}</script><meta name=twitter:card content="summary_large_image"><meta name=twitter:creator content="@reuixiy"><meta property="og:title" content="Hadoop Hbase HAé«˜å¯ç”¨é›†ç¾¤æ­å»º"><meta property="og:description" content="åŸºç¡€ç¯å¢ƒå‡†å¤‡ æ ¹æ®å‰é¢[hadoopé›†ç¾¤æ­å»º](https://mydiscat.cnâ€¦â€¦"><meta property="og:url" content="https://example.com/tech/hadoop-hbase-ha-distributed-cluster-construction/"><meta property="og:site_name" content="æ…¢æ…¢æ‚ "><meta property="og:locale" content="zh"><meta property="og:image" content="https://upload-images.jianshu.io/upload_images/6273500-862219dd55729e0b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:type" content="article"><meta property="article:published_time" content="2018-11-01T08:00:00+08:00"><meta property="article:modified_time" content="2020-11-27T17:21:09+08:00"><meta property="article:section" content="tech"><link rel=preconnect href=https://www.google-analytics.com crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id="></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','');</script><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Lato:wght@700&text=reuixiy&display=swap" media=print onload="this.media='all'"><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Lato:wght@700&text=reuixiy&display=swap"></noscript></head><body><div class=container><header class=header><div class=header-wrapper><div class="header-inner single"><div class=site-brand><a href=/ class=brand>æ…¢æ…¢æ‚ </a></div><nav class=nav><ul class=menu id=menu><li class=menu-item><a href=/life/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon life"><path d="M301.1 212c4.4 4.4 4.4 11.9.0 16.3l-9.7 9.7c-4.4 4.7-11.9 4.7-16.6.0l-10.5-10.5c-4.4-4.7-4.4-11.9.0-16.6l9.7-9.7c4.4-4.4 11.9-4.4 16.6.0l10.5 10.8zm-30.2-19.7c3-3 3-7.8.0-10.5-2.8-3-7.5-3-10.5.0-2.8 2.8-2.8 7.5.0 10.5 3.1 2.8 7.8 2.8 10.5.0zm-26 5.3c-3 2.8-3 7.5.0 10.2 2.8 3 7.5 3 10.5.0 2.8-2.8 2.8-7.5.0-10.2-3-3-7.7-3-10.5.0zm72.5-13.3c-19.9-14.4-33.8-43.2-11.9-68.1 21.6-24.9 40.7-17.2 59.8.8 11.9 11.3 29.3 24.9 17.2 48.2-12.5 23.5-45.1 33.2-65.1 19.1zm47.7-44.5c-8.9-10-23.3 6.9-15.5 16.1 7.4 9 32.1 2.4 15.5-16.1zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-66.2 42.6c2.5-16.1-20.2-16.6-25.2-25.7-13.6-24.1-27.7-36.8-54.5-30.4 11.6-8 23.5-6.1 23.5-6.1.3-6.4.0-13-9.4-24.9 3.9-12.5.3-22.4.3-22.4 15.5-8.6 26.8-24.4 29.1-43.2 3.6-31-18.8-59.2-49.8-62.8-22.1-2.5-43.7 7.7-54.3 25.7-23.2 40.1 1.4 70.9 22.4 81.4-14.4-1.4-34.3-11.9-40.1-34.3-6.6-25.7 2.8-49.8 8.9-61.4.0.0-4.4-5.8-8-8.9.0.0-13.8.0-24.6 5.3 11.9-15.2 25.2-14.4 25.2-14.4.0-6.4-.6-14.9-3.6-21.6-5.4-11-23.8-12.9-31.7 2.8.1-.2.3-.4.4-.5-5 11.9-1.1 55.9 16.9 87.2-2.5 1.4-9.1 6.1-13 10-21.6 9.7-56.2 60.3-56.2 60.3-28.2 10.8-77.2 50.9-70.6 79.7.3 3 1.4 5.5 3 7.5-2.8 2.2-5.5 5-8.3 8.3-11.9 13.8-5.3 35.2 17.7 24.4 15.8-7.2 29.6-20.2 36.3-30.4.0.0-5.5-5-16.3-4.4 27.7-6.6 34.3-9.4 46.2-9.1 8 3.9 8-34.3 8-34.3.0-14.7-2.2-31-11.1-41.5 12.5 12.2 29.1 32.7 28 60.6-.8 18.3-15.2 23-15.2 23-9.1 16.6-43.2 65.9-30.4 106 0 0-9.7-14.9-10.2-22.1-17.4 19.4-46.5 52.3-24.6 64.5 26.6 14.7 108.8-88.6 126.2-142.3 34.6-20.8 55.4-47.3 63.9-65 22 43.5 95.3 94.5 101.1 59z"/></svg><span class=menu-item-name>ç”Ÿæ´»</span></a></li><li class=menu-item><a href=/tech/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tech"><path d="M512 256c0 141.2-114.7 256-256 256C114.8 512 0 397.3.0 256S114.7.0 256 0s256 114.7 256 256zm-32 0c0-123.2-100.3-224-224-224C132.5 32 32 132.5 32 256s100.5 224 224 224 224-100.5 224-224zM160.9 124.6l86.9 37.1-37.1 86.9-86.9-37.1 37.1-86.9zm110 169.1 46.6 94h-14.6l-50-1e2-48.9 1e2h-14l51.1-106.9-22.3-9.4 6-14 68.6 29.1-6 14.3-16.5-7.1zm-11.8-116.3 68.6 29.4-29.4 68.3L230 246l29.1-68.6zm80.3 42.9 54.6 23.1-23.4 54.3-54.3-23.1 23.1-54.3z"/></svg><span class=menu-item-name>æŠ€æœ¯</span></a></li><li class=menu-item><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon about"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6.0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7.0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4.0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9s28-2.7 40.9-6.9c2.3-.7 4.7-1.1 7.1-1.1 42.9.0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class=menu-item-name>å…³äº</span></a></li><li class=menu-item><a id=theme-switcher href=#><span class="icon theme-icon-light">ğŸŒ</span><span class="icon theme-icon-dark">ğŸŒ™</span></a></li></ul></nav></div></div><input type=checkbox id=nav-toggle aria-hidden=true>
<label for=nav-toggle class=nav-toggle></label><label for=nav-toggle class=nav-curtain></label></header><main class="main single" id=main><div class=main-inner><article class="content post h-entry" data-align=justify data-type=tech data-toc-num=true><h1 class="post-title p-name">Hadoop Hbase HAé«˜å¯ç”¨é›†ç¾¤æ­å»º</h1><div class="post-body e-content"><p class=description></p><p><strong>åŸºç¡€ç¯å¢ƒå‡†å¤‡</strong>
æ ¹æ®å‰é¢[hadoopé›†ç¾¤æ­å»º](<a href=https://mydiscat.cn/category/2018/10/31/Hadoop target=_blank rel=noopener>https://mydiscat.cn/category/2018/10/31/Hadoop</a> distributed cluster construction.html)ã€[hbaseé›†ç¾¤æ­å»º](<a href=https://mydiscat.cn/category/2018/10/31/Hbase target=_blank rel=noopener>https://mydiscat.cn/category/2018/10/31/Hbase</a> distributed cluster construction.html)æ·»åŠ å¤–éƒ¨zookeeperé›†ç¾¤</p><blockquote><p style=text-indent:0><span class=drop-cap>ä¸‹</span>è½½zookeeperï¼š <a href=http://mirrors.hust.edu.cn/apache/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz target=_blank rel=noopener>zookeeper-3.4.13</a></p></blockquote><p><strong>zookeeperå®‰è£…</strong></p><p>1ã€ä¸‹è½½åŠå®‰è£…
è§£å‹åˆ°/home/zookeeper/ç›®å½•ä¸‹ï¼š</p><pre><code>tar -zxvf zookeeper-3.4.13.tar.gz -C /home/zookeeper/
</code></pre><p>2ã€æ‹·è´ zoo_sample.cfg
è¿›å…¥zookeeperçš„confç›®å½•ï¼Œæ‹·è´zoo_sample.cfgå¹¶é‡å‘½åä¸ºzoo.cfg ï¼š</p><pre><code>cd zookeeper-3.4.13/conf/
cp zoo_sample.cfg zoo.cfg
</code></pre><p>3ã€ä¿®æ”¹ zoo.cfg</p><pre><code>vi zoo.cfg
</code></pre><p>ä¿®æ”¹å¦‚ä¸‹ï¼Œè‹¥åŸæ–‡ä»¶æ²¡æœ‰dataDiråˆ™ç›´æ¥æ·»åŠ ï¼š</p><pre><code>dataDir=/home/zookeeper/zookeeper-3.4.13/data/zkData
//åœ¨æœ€åæ·»åŠ ï¼ŒæŒ‡å®šzookeeperé›†ç¾¤ä¸»æœºåŠç«¯å£ï¼Œæœºå™¨æ•°å¿…é¡»ä¸ºå¥‡æ•°
server.1=hadoop-master:2888:3888
server.2=hadoop-slave1:2888:3888
server.3=hadoop-slave2:2888:3888
</code></pre><p>4ã€åˆ›å»ºå¹¶ç¼–è¾‘myid
//åœ¨zookeeperæ ¹ç›®å½•ä¸‹åˆ›å»ºzoo.cfgä¸­é…ç½®çš„ç›®å½•</p><pre><code>mkdir data/zkData/ -p
//åˆ›å»ºå¹¶ç¼–è¾‘æ–‡ä»¶
vi myid
//è¾“å…¥1ï¼Œå³è¡¨ç¤ºå½“å‰æœºå™¨ä¸ºåœ¨zoo.cfgä¸­æŒ‡å®šçš„server.1
1
//ä¿å­˜é€€å‡º
:wq
</code></pre><p>5ã€æ‹·è´zookeeperåˆ°å…¶ä»–æœºå™¨
ä¸Šè¿°æ“ä½œæ˜¯åœ¨hadoop-masteræœºå™¨ä¸Šè¿›è¡Œçš„ï¼Œè¦å°†zookeeperæ‹·è´åˆ°å…¶ä»–zookeeperé›†ç¾¤æœºå™¨ä¸Šï¼š</p><pre><code>cd /home/zookeeper
scp -r zookeeper-3.4.13/ hadoop-slave1:/home/zookeeper/
scp -r zookeeper-3.4.13/ hadoop-slave2:/home/zookeeper/
</code></pre><p>6ã€ä¿®æ”¹å…¶ä»–æœºå™¨çš„myidæ–‡ä»¶
myidæ–‡ä»¶æ˜¯ä½œä¸ºå½“å‰æœºå™¨åœ¨zookeeperé›†ç¾¤çš„æ ‡è¯†ï¼Œè¿™äº›æ ‡è¯†åœ¨zoo.cfgæ–‡ä»¶ä¸­å·²ç»é…ç½®å¥½äº†ï¼Œä½†æ˜¯ä¹‹å‰åœ¨hadoop-masterè¿™å°æœºå™¨ä¸Šé…ç½®çš„myidä¸º1ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¿®æ”¹å…¶ä»–æœºå™¨çš„myidæ–‡ä»¶ï¼š</p><pre><code>//åœ¨hadoop-slave1æœºå™¨ä¸Š
echo 2 &gt; /home/zookeeper/zookeeper-3.4.13/data/zkData/myid
//åœ¨hadoop-slave2æœºå™¨ä¸Š
echo 3 &gt; /home/zookeeper/zookeeper-3.4.13/data/zkData/myid
</code></pre><p>7ã€é…ç½®ç¯å¢ƒå˜é‡ vim /etc/profile</p><pre><code>æ·»åŠ ï¼š
export ZOOKEEPER_HOME=/home/zookeeper/zookeeper-3.4.13
export PATH=$PATH:$ZOOKEEPER_HOME/bin
å…¶å®ƒæœåŠ¡å™¨åŒæ ·é…ç½®
</code></pre><p>é…ç½®ç”Ÿæ•ˆ source /etc/profile
8ã€å¯åŠ¨zookeeperé›†ç¾¤</p><pre><code>cd zookeeper-3.4.11/bin/
//åˆ†åˆ«åœ¨master188ã€master189ã€slave190ä¸Šå¯åŠ¨
/home/zookeeper/zookeeper-3.4.13/bin/zkServer.sh start

//æŸ¥çœ‹çŠ¶æ€
/home/zookeeper/zookeeper-3.4.13/bin/zkServer.sh  status
ä¸‰å°æœºå™¨çš„zookeeperçŠ¶æ€å¿…é¡»åªæœ‰ä¸€ä¸ªleaderï¼Œå…¶ä»–éƒ½æ˜¯followerã€‚

//æŸ¥çœ‹è¿›ç¨‹ï¼Œè‹¥æœ‰QuorumpeerMainï¼Œåˆ™å¯åŠ¨æˆåŠŸ
jps
//åœæ­¢
/home/zookeeper/zookeeper-3.4.13/bin/zkServer.sh stop
</code></pre><p><strong>hadoopæ·»åŠ zookeeper</strong></p><p>1ã€é…ç½®core-site.xml</p><pre><code>æ·»åŠ ï¼š
  &lt;!-- æŒ‡å®šZooKeeperé›†ç¾¤çš„åœ°å€å’Œç«¯å£ã€‚æ³¨æ„ï¼Œæ•°é‡ä¸€å®šæ˜¯å¥‡æ•°ï¼Œä¸”ä¸å°‘äºä¸‰ä¸ªèŠ‚ç‚¹--&gt;
  &lt;property&gt;
    &lt;name&gt;ha.zookeeper.quorum&lt;/name&gt;
    &lt;value&gt;hadoop-master:2181,hadoop-slave1:2181,hadoop-slave2:2181&lt;/value&gt;
  &lt;/property&gt;
ä¿®æ”¹ï¼š
    &lt;property&gt;
         &lt;name&gt;fs.defaultFS&lt;/name&gt;
         &lt;value&gt;hdfs://hadoop-master:9000&lt;/value&gt;
    &lt;/property&gt; 
ä¸ºï¼š
    &lt;property&gt;
         &lt;name&gt;fs.defaultFS&lt;/name&gt;
         &lt;value&gt;hdfs://ns1&lt;/value&gt;
    &lt;/property&gt; 
</code></pre><p>2ã€é…ç½®hdfs-site.xml</p><pre><code>&lt;configuration&gt;
  &lt;!-- æŒ‡å®šå‰¯æœ¬æ•°ï¼Œä¸èƒ½è¶…è¿‡æœºå™¨èŠ‚ç‚¹æ•°  --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.replication&lt;/name&gt;
    &lt;value&gt;3&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- ä¸ºnamenodeé›†ç¾¤å®šä¹‰ä¸€ä¸ªservices name --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.nameservices&lt;/name&gt;
    &lt;value&gt;ns1&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- nameservice åŒ…å«å“ªäº›namenodeï¼Œä¸ºå„ä¸ªnamenodeèµ·å --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.ha.namenodes.ns1&lt;/name&gt;
    &lt;value&gt;hadoop-master,hadoop-slave1&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- åä¸ºhadoop-masterçš„namenodeçš„rpcåœ°å€å’Œç«¯å£å·ï¼Œrpcç”¨æ¥å’Œdatanodeé€šè®¯ --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.namenode.rpc-address.ns1.hadoop-master&lt;/name&gt;
    &lt;value&gt;hadoop-master:9000&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- åä¸ºhadoop-slave1çš„namenodeçš„rpcåœ°å€å’Œç«¯å£å·ï¼Œrpcç”¨æ¥å’Œdatanodeé€šè®¯ --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.namenode.rpc-address.ns1.hadoop-slave1&lt;/name&gt;
    &lt;value&gt;hadoop-slave1:9000&lt;/value&gt;
  &lt;/property&gt;

  &lt;!--åä¸ºhadoop-masterçš„namenodeçš„httpåœ°å€å’Œç«¯å£å·ï¼Œç”¨æ¥å’Œwebå®¢æˆ·ç«¯é€šè®¯ --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.namenode.http-address.ns1.hadoop-master&lt;/name&gt;
    &lt;value&gt;hadoop-master:50070&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- åä¸ºhadoop-slave1çš„namenodeçš„httpåœ°å€å’Œç«¯å£å·ï¼Œç”¨æ¥å’Œwebå®¢æˆ·ç«¯é€šè®¯ --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.namenode.http-address.ns1.hadoop-slave1&lt;/name&gt;
    &lt;value&gt;hadoop-slave1:50070&lt;/value&gt;
  &lt;/property&gt;
  
  &lt;!-- namenodeé—´ç”¨äºå…±äº«ç¼–è¾‘æ—¥å¿—çš„journalèŠ‚ç‚¹åˆ—è¡¨ --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;
    &lt;value&gt;qjournal://hadoop-master:8485;hadoop-slave1:8485;hadoop-slave2:8485/ns1&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- æŒ‡å®šè¯¥é›†ç¾¤å‡ºç°æ•…éšœæ—¶ï¼Œæ˜¯å¦è‡ªåŠ¨åˆ‡æ¢åˆ°å¦ä¸€å°namenode --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.ha.automatic-failover.enabled.ns1&lt;/name&gt;
    &lt;value&gt;true&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- journalnode ä¸Šç”¨äºå­˜æ”¾editsæ—¥å¿—çš„ç›®å½• --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.journalnode.edits.dir&lt;/name&gt;
    &lt;value&gt;/home/hadoop/hadoop/tmp/data/dfs/journalnode&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- å®¢æˆ·ç«¯è¿æ¥å¯ç”¨çŠ¶æ€çš„NameNodeæ‰€ç”¨çš„ä»£ç†ç±» --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.client.failover.proxy.provider.ns1&lt;/name&gt;
    &lt;value&gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- ä¸€æ—¦éœ€è¦NameNodeåˆ‡æ¢ï¼Œä½¿ç”¨sshæ–¹å¼è¿›è¡Œæ“ä½œ --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.ha.fencing.methods&lt;/name&gt;
    &lt;value&gt;sshfence&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- å¦‚æœä½¿ç”¨sshè¿›è¡Œæ•…éšœåˆ‡æ¢ï¼Œä½¿ç”¨sshé€šä¿¡æ—¶ç”¨çš„å¯†é’¥å­˜å‚¨çš„ä½ç½® --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.ha.fencing.ssh.private-key-files&lt;/name&gt;
    &lt;value&gt;/root/.ssh/id_rsa&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- connect-timeoutè¶…æ—¶æ—¶é—´ --&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.ha.fencing.ssh.connect-timeout&lt;/name&gt;
    &lt;value&gt;30000&lt;/value&gt;
  &lt;/property&gt;

  &lt;property&gt;
       &lt;name&gt;dfs.name.dir&lt;/name&gt;
       &lt;value&gt;/home/hadoop/hadoop/hdfs/name&lt;/value&gt;
  &lt;/property&gt;

  &lt;property&gt;
       &lt;name&gt;dfs.data.dir&lt;/name&gt;
       &lt;value&gt;/home/hadoop/hadoop/hdfs/data&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;

</code></pre><p>3ã€é…ç½® mapred-site.xml</p><pre><code>å–æ¶ˆï¼š
 &lt;!-- &lt;property&gt;
        &lt;name&gt;mapred.job.tracker&lt;/name&gt;
        &lt;value&gt;http://hadoop-master:9001&lt;/value&gt;
  &lt;/property&gt;--&gt;
</code></pre><p>4ã€é…ç½® yarn-site.xml</p><pre><code>&lt;configuration&gt;

  &lt;!-- å¯ç”¨HAé«˜å¯ç”¨æ€§ --&gt;
  &lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.ha.enabled&lt;/name&gt;
    &lt;value&gt;true&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- æŒ‡å®šresourcemanagerçš„åå­— --&gt;
  &lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.cluster-id&lt;/name&gt;
    &lt;value&gt;yrc&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- ä½¿ç”¨äº†2ä¸ªresourcemanager,åˆ†åˆ«æŒ‡å®šResourcemanagerçš„åœ°å€ --&gt;
  &lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.ha.rm-ids&lt;/name&gt;
    &lt;value&gt;rm1,rm2&lt;/value&gt;
  &lt;/property&gt;
  
  &lt;!-- æŒ‡å®šrm1çš„åœ°å€ --&gt;
  &lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.hostname.rm1&lt;/name&gt;
    &lt;value&gt;hadoop-master&lt;/value&gt;
  &lt;/property&gt;
  
  &lt;!-- æŒ‡å®šrm2çš„åœ°å€  --&gt;
  &lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.hostname.rm2&lt;/name&gt;
    &lt;value&gt;hadoop-slave1&lt;/value&gt;
  &lt;/property&gt;
  
  &lt;!-- æŒ‡å®šå½“å‰æœºå™¨hadoop-masterä½œä¸ºrm1 --&gt;
  &lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.ha.id&lt;/name&gt;
    &lt;value&gt;rm1&lt;/value&gt;
  &lt;/property&gt;
  
  &lt;!-- æŒ‡å®šzookeeperé›†ç¾¤æœºå™¨ --&gt;
  &lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.zk-address&lt;/name&gt;
    &lt;value&gt;hadoop-master:2181,hadoop-slave1:2181,hadoop-slave2:2181&lt;/value&gt;
  &lt;/property&gt;
  
  &lt;!-- NodeManagerä¸Šè¿è¡Œçš„é™„å±æœåŠ¡ï¼Œé»˜è®¤æ˜¯mapreduce_shuffle --&gt;
  &lt;property&gt;
    &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
    &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
  &lt;/property&gt;

&lt;/configuration&gt;
</code></pre><p>5ã€vi slaves</p><pre><code>hadoop-master
hadoop-slave1
hadoop-slave2
</code></pre><p><strong>æ‹·è´hadoopåˆ°å…¶ä»–æœºå™¨</strong></p><p>1ã€æ‹·è´</p><pre><code>scp -r /home/hadoop/hadoop hadoop-slave1:/home/hadoop/
scp -r /home/hadoop/hadoop hadoop-slave2:/home/hadoop/
</code></pre><p>2ã€ä¿®æ”¹yarn-site.xml
åœ¨hadoop-slave1æœºå™¨ï¼Œå³ResourceManagerå¤‡ç”¨ä¸»èŠ‚ç‚¹ä¸Šä¿®æ”¹å¦‚ä¸‹å±æ€§ï¼Œè¡¨ç¤ºå½“å‰æœºå™¨ä½œä¸ºrm2:ï¼š</p><pre><code>  &lt;property&gt;
    &lt;name&gt;yarn.resourcemanager.ha.id&lt;/name&gt;
    &lt;value&gt;rm2&lt;/value&gt;
  &lt;/property&gt;
</code></pre><p>åŒæ—¶åˆ é™¤hadoop-slave2æœºå™¨ä¸Šçš„è¯¥å±æ€§å¯¹ï¼Œå› ä¸ºhadoop-slave2æœºå™¨å¹¶ä¸ä½œä¸ºResourceManagerã€‚</p><p>####å¯åŠ¨Hadoop
1ã€å¯åŠ¨zookeeper</p><pre><code>/home/zookeeper/zookeeper-3.4.13/bin/zkServer.sh start
</code></pre><p>2ã€å¯åŠ¨æ‰€æœ‰Journalnode</p><pre><code>/home/hadoop/hadoop/sbin/hadoop-daemon.sh start  journalnode
</code></pre><p>3ã€æ ¼å¼åŒ–master namenodeï¼ˆè¿™é‡Œç›´æ¥å¤åˆ¶ä¼šæœ‰é—®é¢˜ï¼Œæœ€å¥½æ‰‹åŠ¨è¾“å…¥ï¼‰ï¼ˆç¬¬ä¸€æ¬¡å¯åŠ¨æ“ä½œï¼‰</p><pre><code>/home/hadoop/hadoop/bin/hdfs namenode â€“format

#å¯åŠ¨ master namenode 
/home/hadoop/hadoop/sbin/hadoop-daemon.sh start namenode

#master2ä¸ŠåŒæ­¥master namenodeå…ƒæ•°æ® 
bin/hdfs namenode -bootstrapStandby
#æ ¼å¼åŒ– zkï¼ˆåœ¨hadoop-masterå³å¯ï¼‰ï¼ˆè¿™é‡Œç›´æ¥å¤æ‚ä¼šæœ‰é—®é¢˜ï¼Œæœ€å¥½æ‰‹åŠ¨è¾“å…¥ï¼‰

/home/hadoop/hadoop/bin/hdfs zkfc â€“formatZK
</code></pre><p>4ã€å¯åŠ¨HDFSã€YARNã€ZookeeperFailoverController</p><pre><code>/home/hadoop/hadoop/sbin/start-dfs.sh
//jpséªŒè¯ï¼Œæ˜¾ç¤ºNameNodeå’ŒDataNode

/home/hadoop/hadoop/sbin/start-yarn.sh
//jps éªŒè¯ï¼Œæ˜¾ç¤ºResourceManagerå’ŒNodeManager
</code></pre><p>4ã€å¯åŠ¨resourcemanagerï¼ˆhadoop-masterã€hadoop-slave1ï¼‰</p><pre><code>/home/hadoop/hadoop/sbin/yarn-daemon.sh start resourcemanager
</code></pre><p>5ã€å¯åŠ¨zkfcæ¥ç›‘æ§NNçŠ¶æ€ï¼ˆåœ¨hadoop-masterã€hadoop-slave1ï¼‰</p><pre><code>/home/hadoop/hadoop/sbin/hadoop-daemon.sh start zkfc
</code></pre><p>å¯åŠ¨å‘½ä»¤ï¼š</p><pre><code>#hadoop-master
/home/hadoop/hadoop/sbin/start-all.sh
/home/hadoop/hadoop/sbin/hadoop-daemon.sh start zkfc

#hadoop-slave1
/home/hadoop/hadoop/sbin/yarn-daemon.sh start resourcemanager
/home/hadoop/hadoop/sbin/hadoop-daemon.sh start zkfc
</code></pre><p>åœæ­¢å‘½ä»¤ï¼š</p><pre><code>#hadoop-master
/home/hadoop/hadoop/sbin/stop-all.sh
/home/hadoop/hadoop/sbin/hadoop-daemon.sh stop zkfc

#hadoop-slave1
/home/hadoop/hadoop/sbin/yarn-daemon.sh stop resourcemanager
/home/hadoop/hadoop/sbin/hadoop-daemon.sh stop zkfc
</code></pre><p>å¯åŠ¨æ‰€æœ‰è¿›ç¨‹æ˜¾ç¤ºï¼š
<img src=https://upload-images.jianshu.io/upload_images/6273500-862219dd55729e0b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt=å¯åŠ¨é¡¹></p><p><strong>é”™è¯¯å¤„ç†ï¼š</strong>
1ã€NameNode is not formatted</p><pre><code>åŸå› :  Path /home/hadoop/hadoop/hdfs/name should be specified as a URI in configura
tion files.
æ–¹æ³•:æŠŠdfs.namenode.name.dirã€dfs.datanode.data.dirçš„åŸè·¯å¾„æ ¼å¼å¦‚/usr/mywind/nameæ”¹æˆfile:/usr/mywind/nameï¼Œå³ä½¿ç”¨å®Œå…¨è·¯å¾„ã€‚
è¿˜æœ‰ä¸ªåŸå› ï¼šæ ¼å¼åŒ–å‘½ä»¤å¤åˆ¶è¿›å»è¿è¡ŒæŠ¥é”™ï¼Œæ‰‹åŠ¨è¾“å…¥æ­£å¸¸
</code></pre><p><strong>æµ‹è¯•</strong>
wordcountç¨‹åºæµ‹è¯•ï¼Œåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œå¹¶ä¸Šä¼ åˆ°hdfsä¸Š</p><pre><code>#https:// ä¸ºä¸‹é¢æ–‡å­—åŠ é¢œè‰²
https://

#åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶
 vim test.txt 
#ä¸Šä¼ åˆ°hdfsä¸Š
hadoop fs -put test.txt /input
#æŸ¥è¯¢hdfsä¸Šé¢æ˜¯å¦å­˜åœ¨inputæ–‡ä»¶
hadoop fs -ls /input
#è®¡ç®—
 hadoop jar hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.4.jar wordcount /input /output1
#æŸ¥çœ‹è¾“å‡ºç»“æœ
hadoop fs -cat /output1/part*

</code></pre><p><img src=https://upload-images.jianshu.io/upload_images/6273500-fb526b6ff7c7bb7b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt=ç»“æœ></p><p><strong>Hbaseå®‰è£…é…ç½®</strong>
è¿›å…¥/home/hbase/hbase/conf/ç›®å½•ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š
1ã€é…ç½® hbase-env.sh</p><pre><code>//é…ç½®JDK
export JAVA_HOME=/usr/java/

//ä¿å­˜pidæ–‡ä»¶
export HBASE_PID_DIR=/home/hbase/hbase/data/hbase/pids

//ä¿®æ”¹HBASE_MANAGES_ZKï¼Œç¦ç”¨HBaseè‡ªå¸¦çš„Zookeeperï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä½¿ç”¨ç‹¬ç«‹çš„Zookeeper
export HBASE_MANAGES_ZK=false
</code></pre><p>2ã€é…ç½® hbase-site.xml</p><pre><code>&lt;configuration&gt;
  &lt;!-- è®¾ç½®HRegionServerså…±äº«ç›®å½•ï¼Œè¯·åŠ ä¸Šç«¯å£å· --&gt;
  &lt;property&gt;
    &lt;name&gt;hbase.rootdir&lt;/name&gt;
    &lt;value&gt;hdfs://master188:9000/hbase&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- æŒ‡å®šHMasterä¸»æœº --&gt;
  &lt;property&gt;
    &lt;name&gt;hbase.master&lt;/name&gt;
    &lt;value&gt;hdfs://master188:60000&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- å¯ç”¨åˆ†å¸ƒå¼æ¨¡å¼ --&gt;
  &lt;property&gt;
    &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;
    &lt;value&gt;true&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- æŒ‡å®šZookeeperé›†ç¾¤ä½ç½® --&gt;
  &lt;property&gt;
    &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;
    &lt;value&gt;hadoop-master:2181,hadoop-slave1:2181,hadoop-slave2:2181&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- æŒ‡å®šç‹¬ç«‹Zookeeperå®‰è£…è·¯å¾„ --&gt;
  &lt;property&gt;
    &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;
    &lt;value&gt;/home/zookeeper/zookeeper-3.4.13&lt;/value&gt;
  &lt;/property&gt;

  &lt;!-- æŒ‡å®šZooKeeperé›†ç¾¤ç«¯å£ --&gt;
  &lt;property&gt;
    &lt;name&gt;hbase.zookeeper.property.clientPort&lt;/name&gt;
    &lt;value&gt;2181&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><p>3ï¼‰vi regionservers
ä¿®æ”¹regionserversæ–‡ä»¶ï¼Œå› ä¸ºå½“å‰æ˜¯ä½¿ç”¨ç‹¬ç«‹çš„Zookeeperé›†ç¾¤ï¼Œæ‰€ä»¥è¦æŒ‡å®šRegionServersæ‰€åœ¨æœºå™¨ï¼š</p><pre><code>hadoop-master
hadoop-slave1
hadoop-slave2
</code></pre><p>4ï¼‰åˆ›å»ºpidæ–‡ä»¶ä¿å­˜ç›®å½•
åœ¨/home/hbase/hbase/ç›®å½•ä¸‹ï¼š</p><pre><code>mkdir data/hbase/pids -p
</code></pre><p>3ã€æ‹·è´HBaseåˆ°å…¶ä»–æœºå™¨</p><pre><code>scp -r /home/hbase/hbase/ hadoop-slave1:/home/hadoop/
scp -r /home/hbase/hbase/ hadoop-slave2:/home/hadoop/
</code></pre><p>4ã€å¯åŠ¨HBase
åœ¨ä¸»èŠ‚ç‚¹ä¸Šå¯åŠ¨HBaseï¼ˆä¸»èŠ‚ç‚¹æŒ‡NameNodeçŠ¶æ€ä¸ºactiveçš„èŠ‚ç‚¹ï¼ŒéæŒ‡æ–‡ä¸­çš„æœºå™¨å£°æ˜ï¼‰ï¼š</p><pre><code>/home/hbase/hbase/bin/start-hbase.sh
</code></pre><p>5ã€æŸ¥çœ‹HMasterã€Regionserverè¿›ç¨‹æ˜¯å¦å¯åŠ¨</p><pre><code>jps
æ³¨æ„ï¼šæ­¤æ—¶Hadoopé›†ç¾¤åº”å¤„äºå¯åŠ¨çŠ¶æ€ï¼Œå¹¶ä¸”æ˜¯åœ¨ä¸»èŠ‚ç‚¹æ‰§è¡Œstart-hbase.shå¯åŠ¨HBaseé›†ç¾¤ï¼Œå¦åˆ™HMasterè¿›ç¨‹å°†åœ¨å¯åŠ¨å‡ ç§’åæ¶ˆå¤±ï¼Œ
è€Œå¤‡ç”¨çš„HMasterè¿›ç¨‹éœ€è¦åœ¨å¤‡ç”¨ä¸»èŠ‚ç‚¹å•ç‹¬å¯åŠ¨ï¼Œå‘½ä»¤æ˜¯ï¼š./hbase-daemon.sh start masterã€‚

åœ¨å¤‡ç”¨ä¸»èŠ‚ç‚¹å¯åŠ¨HMasterè¿›ç¨‹ï¼Œä½œä¸ºå¤‡ç”¨HMasterï¼š
/home/hbase/hbase/bin/hbase-daemon.sh start master
</code></pre><p>5ã€HAé«˜å¯ç”¨æµ‹è¯•</p><pre><code>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ ip:16010 ï¼ŒæŸ¥çœ‹ä¸»èŠ‚ç‚¹å’Œå¤‡ç”¨ä¸»èŠ‚ç‚¹ä¸Šçš„HMasterçš„çŠ¶æ€ï¼Œåœ¨å¤‡ç”¨ä¸»èŠ‚ç‚¹çš„webç•Œé¢ä¸­ï¼Œ
å¯ä»¥çœ‹åˆ°â€œCurrent Active Master: master188â€ï¼Œè¡¨ç¤ºå½“å‰HBaseä¸»èŠ‚ç‚¹æ˜¯master188æœºå™¨ï¼›

ä¸»èŠ‚ç‚¹---&gt;å¤‡ç”¨ä¸»èŠ‚ç‚¹
è¿™é‡Œçš„ä¸»èŠ‚ç‚¹æŒ‡ä½¿ç”¨start-hbase.shå‘½ä»¤å¯åŠ¨HBaseé›†ç¾¤çš„æœºå™¨

killæ‰ä¸»èŠ‚ç‚¹çš„HMasterè¿›ç¨‹ï¼Œåœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹å¤‡ç”¨ä¸»èŠ‚ç‚¹çš„HBaseæ˜¯å¦åˆ‡æ¢ä¸ºactiveï¼›

è‹¥ä¸Šè¿°æ“ä½œæˆåŠŸï¼Œåˆ™åœ¨ä¸»èŠ‚ç‚¹å¯åŠ¨è¢«æ€æ­»çš„HMasterè¿›ç¨‹ï¼š

/home/hbase/hbase/bin/hbase-daemon.sh start master

ç„¶åï¼Œkillæ‰å¤‡ç”¨ä¸»èŠ‚ç‚¹çš„HMasterè¿›ç¨‹ï¼Œåœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ä¸»èŠ‚ç‚¹çš„HBaseæ˜¯å¦åˆ‡æ¢ä¸ºactiveï¼Œè‹¥æ“ä½œæˆåŠŸï¼Œåˆ™HBaseé«˜å¯ç”¨é›†ç¾¤æ­å»ºå®Œæˆï¼›
</code></pre><p>6ã€HBaseåŸºæœ¬æ“ä½œ</p><pre><code>//å¯åŠ¨HBase
[root@vnet ~] start-hbase.sh

//è¿›å…¥HBase Shell
[root@vnet ~] hbase shell

//æŸ¥çœ‹å½“å‰HBaseæœ‰å“ªäº›è¡¨
hbase(main):&gt; list

//åˆ›å»ºè¡¨t_userï¼Œcf1å’Œcf2æ˜¯åˆ—æ—ï¼Œåˆ—æ—ä¸€èˆ¬ä¸è¶…è¿‡3ä¸ª
hbase(main):&gt; create 't_user','cf1','cf2'

//è·å¾—è¡¨t_userçš„æè¿°ä¿¡æ¯
hbase(main):&gt; describe 't_user'

//ç¦ç”¨è¡¨
hbase(main):&gt; disable 't_user'

//åˆ é™¤è¡¨ï¼Œåˆ é™¤è¡¨ä¹‹å‰è¦å…ˆæŠŠè¡¨ç¦ç”¨æ‰
hbase(main):&gt; drop 't_user'

//æŸ¥è¯¢è¡¨æ˜¯å¦å­˜åœ¨
hbase(main):&gt; exists 't_user'

//æŸ¥çœ‹å…¨è¡¨æ•°æ®
hbase(main):&gt; scan 't_user'

//æ’å…¥æ•°æ®ï¼Œåˆ†åˆ«æ˜¯è¡¨åã€keyã€åˆ—ï¼ˆåˆ—æ—ï¼šå…·ä½“åˆ—ï¼‰ã€å€¼ã€‚HBaseæ˜¯é¢å‘åˆ—çš„æ•°æ®åº“ï¼Œåˆ—å¯æ— é™æ‰©å……
hbase(main):&gt; put 't_user' ,'001','cf1:name','chenxj'
hbase(main):&gt; put 't_user' ,'001','cf1:age','18'
hbase(main):&gt; put 't_user' ,'001','cf2:sex','man'
hbase(main):&gt; put 't_user' ,'002','cf1:name','chenxj'
hbase(main):&gt; put 't_user' ,'002','cf1:address','fuzhou'
hbase(main):&gt; put 't_user' ,'002','cf2:sex','man'

//è·å–æ•°æ®ï¼Œå¯æ ¹æ®keyã€keyå’Œåˆ—æ—ç­‰è¿›è¡ŒæŸ¥è¯¢
hbase(main):&gt; get 't_user','001'
hbase(main):&gt; get 't_user','002','cf1'
hbase(main):&gt; get 't_user','001','cf1:age'
</code></pre><p>7ã€é›†ç¾¤å¯åŠ¨ç»“æœ
Hadoop + Zookeeper + HBase é«˜å¯ç”¨é›†ç¾¤å¯åŠ¨åï¼Œè¿›ç¨‹çŠ¶æ€å¦‚ä¸‹ï¼š</p><div class=table-container><table><thead><tr><th>æè¿°</th><th>hadoop-master</th><th>hadoop-slave1</th><th>hadoop-slave2</th></tr></thead><tbody><tr><td>HDFSä¸»</td><td>NameNode</td><td>NameNode</td><td></td></tr><tr><td>HDFSä»</td><td>DataNode</td><td>DataNode</td><td>DataNode</td></tr><tr><td>YARNä¸»</td><td>ResourceManager</td><td>ResourceManager</td><td></td></tr><tr><td>YARNä»</td><td>NodeManager</td><td>NodeManager</td><td>NodeManager</td></tr><tr><td>HBaseä¸»</td><td>HMaster</td><td>HMaster</td><td></td></tr><tr><td>HBaseä»</td><td>HRegionServer</td><td>HRegionServer</td><td>HRegionServer</td></tr><tr><td>Zookeeperç‹¬ç«‹è¿›ç¨‹</td><td>QuorumPeerMain</td><td>QuorumPeerMain</td><td>QuorumPeerMain</td></tr><tr><td>NameNodesæ•°æ®åŒæ­¥</td><td>JournalNode</td><td>JournalNode</td><td>JournalNode</td></tr><tr><td>ä¸»å¤‡æ•…éšœåˆ‡æ¢</td><td>DFSZKFailoverController</td><td>DFSZKFailoverController</td><td></td></tr></tbody></table></div><p><strong>æ€»ç»“</strong>
éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p><p>1ï¼‰å¤‡ç”¨èŠ‚ç‚¹ä¸Šçš„NameNodeã€ResourceManagerã€HMasterå‡éœ€å•ç‹¬å¯åŠ¨ï¼›</p><pre><code>hadoop-daemon.sh start namenode
yarn-daemon.sh start resourcemanager
hbase-daemon.sh start master 
</code></pre><p>2ï¼‰å¯ä»¥ä½¿ç”¨-forcemanualå‚æ•°å¼ºåˆ¶åˆ‡æ¢ä¸»èŠ‚ç‚¹ä¸å¤‡ç”¨ä¸»èŠ‚ç‚¹ï¼Œä½†å¼ºåˆ¶åˆ‡æ¢åé›†ç¾¤çš„è‡ªåŠ¨æ•…éšœè½¬ç§»å°†ä¼šå¤±æ•ˆï¼Œéœ€è¦é‡æ–°æ ¼å¼åŒ–zkfcï¼šhdfs zdfc -formatZK;</p><pre><code>ï¼ˆè¿™ä¸ªæ²¡æœ‰æµ‹è¯•ï¼‰
hdfs haadmin -transitionToActive/transitionToStandby  -forcemanual  hadoop-slave1
yarn rmadmin -transitionToActive/transitionToStandby  -forcemanual  rm2
</code></pre><p>3ï¼‰åœ¨å¤‡ç”¨ä¸»èŠ‚ç‚¹åŒæ­¥ä¸»èŠ‚ç‚¹çš„å…ƒæ•°æ®æ—¶ï¼Œä¸»èŠ‚ç‚¹çš„HDFSå¿…é¡»å·²ç»å¯åŠ¨ï¼›</p><p>4ï¼‰æ— æ³•æŸ¥çœ‹standbyçŠ¶æ€çš„èŠ‚ç‚¹ä¸Šçš„hdfsï¼›</p><p>5ï¼‰æ ¼å¼åŒ–namenodeæ—¶è¦å…ˆå¯åŠ¨å„ä¸ªJournalNodeæœºå™¨ä¸Šçš„journalnodeè¿›ç¨‹ï¼š
å¦åˆ™ä¼šæŠ¥journalnodeæ‹’ç»è¿æ¥é”™è¯¯</p><pre><code>hadoop-daemon.sh start journalnodeï¼›
</code></pre><p>6ï¼‰è‹¥é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å…ˆè€ƒè™‘æ˜¯å“ªä¸ªç»„ä»¶å‡ºç°é—®é¢˜ï¼Œç„¶åæŸ¥çœ‹è¯¥ç»„ä»¶æˆ–ä¸è¯¥ç»„ä»¶ç›¸å…³çš„ç»„ä»¶çš„æ—¥å¿—ä¿¡æ¯ï¼›è‹¥å„ç»„ä»¶webé¡µé¢æ— æ³•è®¿é—®ï¼Œæˆ–å­˜åœ¨å…¶ä»–è¿æ¥é—®é¢˜ï¼Œå¯ä»¥ä»ã€Œé˜²ç«å¢™æ˜¯å¦å…³é—­ã€ã€ã€Œç«¯å£æ˜¯å¦è¢«å ç”¨ã€ã€ã€ŒSSHã€ã€ã€Œé›†ç¾¤æœºå™¨æ˜¯å¦å¤„äºåŒä¸€ç½‘æ®µã€å†…ç­‰è§’åº¦è€ƒè™‘</p><p><strong>å‚è€ƒï¼š <a href=https://www.cnblogs.com/sqchen/p/8080952.html target=_blank rel=noopener>Hadoop HAé«˜å¯ç”¨é›†ç¾¤æ­å»ºï¼ˆHadoop+Zookeeper+HBaseï¼‰</a></strong></p><hr></div></article><footer class=minimal-footer><div class=post-tag><a href=/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/ rel=tag class=post-tag-link>#å¤§æ•°æ®</a></div><div class=post-category><a href=/tech/ class="post-category-link active">tech</a> | <a href=/life/ class=post-category-link>life</a></div></footer></div></main></div><script>if('serviceWorker'in navigator){window.addEventListener('load',function(){navigator.serviceWorker.register('\/sw.js');});}</script><script src=/js/medium-zoom.min.js></script><script>mediumZoom(document.querySelectorAll('div.post-body img'),{background:'hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)'})</script></body></html>